# Docker Compose configuration for PSOR project
# Modernized for Docker Compose plugin, no obsolete 'version' key

services:
  orchestrator:
    build: ./orchestrator
    working_dir: /app
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./playbooks:/app/playbooks:ro
      - ./reports:/app/reports:rw
      - ./plugins:/app/plugins:ro

  plugin-python-revoke-key:
    build:
      context: ./plugins/python-sdk
      dockerfile: revoke-iam-key/Dockerfile

  plugin-java-block-ip:
    build:
      context: ./plugins/java-sdk
      dockerfile: block-ip-address/Dockerfile

  plugin-rust-isolate-endpoint:
    build:
      context: ./plugins/rust-sdk
      dockerfile: isolate-endpoint/Dockerfile

  plugin-java-unblock-ip:
    build:
      context: ./plugins/java-sdk
      dockerfile: unblock-ip-address/Dockerfile

  plugin-rust-unisolate-endpoint:
    build:
      context: ./plugins/rust-sdk
      dockerfile: unisolate-endpoint/Dockerfile

  # Uncomment and add JS plugin if needed
  # plugin-js-log-message:
  #   build:
  #     context: ./plugins/js-sdk
  #     dockerfile: log-message/Dockerfile
